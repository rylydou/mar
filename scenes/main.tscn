[gd_scene load_steps=11 format=3 uid="uid://c3y7c3j4xw4ha"]

[ext_resource type="Script" path="res://scripts/main.gd" id="1_ahwhj"]
[ext_resource type="PackedScene" uid="uid://drscd8bltk4wv" path="res://scenes/player.tscn" id="2_5efia"]
[ext_resource type="Texture2D" uid="uid://y2bslhpmw2v1" path="res://sprites/tileset.png" id="3_dryvr"]
[ext_resource type="Script" path="res://scripts/lobby.gd" id="4_yvhqy"]
[ext_resource type="Script" path="res://scripts/server_listener.gd" id="5_db7qn"]
[ext_resource type="Script" path="res://scripts/server_advertiser.gd" id="6_8yafm"]

[sub_resource type="TileSetAtlasSource" id="TileSetAtlasSource_wx0xj"]
texture = ExtResource("3_dryvr")
texture_region_size = Vector2i(8, 8)
0:0/0 = 0
0:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_0/angular_velocity = 0.0
0:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
0:0/0/physics_layer_1/angular_velocity = 0.0
1:0/0 = 0
1:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_0/angular_velocity = 0.0
1:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
1:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
1:0/0/physics_layer_1/angular_velocity = 0.0
2:0/0 = 0
2:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_0/angular_velocity = 0.0
2:0/0/physics_layer_0/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)
2:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
2:0/0/physics_layer_1/angular_velocity = 0.0
3:0/0 = 0
3:0/0/physics_layer_0/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_0/angular_velocity = 0.0
3:0/0/physics_layer_1/linear_velocity = Vector2(0, 0)
3:0/0/physics_layer_1/angular_velocity = 0.0
3:0/0/physics_layer_1/polygon_0/points = PackedVector2Array(-4, -4, 4, -4, 4, 4, -4, 4)

[sub_resource type="TileSet" id="TileSet_umrki"]
tile_size = Vector2i(8, 8)
physics_layer_0/collision_layer = 1
physics_layer_0/collision_mask = 0
physics_layer_1/collision_layer = 65536
physics_layer_1/collision_mask = 0
sources/1 = SubResource("TileSetAtlasSource_wx0xj")

[sub_resource type="Theme" id="Theme_7qrt7"]
default_font_size = 8

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_rr5dk"]
bg_color = Color(0, 0, 0, 1)

[node name="Main" type="Node2D" node_paths=PackedStringArray("players_node")]
script = ExtResource("1_ahwhj")
player_scene = ExtResource("2_5efia")
players_node = NodePath("Objects")

[node name="Background" type="CanvasLayer" parent="."]
layer = -1

[node name="ColorRect" type="ColorRect" parent="Background"]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 1)

[node name="TileMap" type="TileMap" parent="."]
tile_set = SubResource("TileSet_umrki")
collision_visibility_mode = 2
format = 2
layer_0/tile_data = PackedInt32Array(589808, 65537, 0, 589809, 65537, 0, 589810, 65537, 0, 589811, 65537, 0, 589812, 65537, 0, 589813, 65537, 0, 589814, 65537, 0, 589815, 65537, 0, 589816, 65537, 0, 589817, 65537, 0, 589818, 65537, 0, 589819, 65537, 0, 589820, 65537, 0, 589821, 65537, 0, 589822, 65537, 0, 589823, 65537, 0, 524288, 65537, 0, 524289, 65537, 0, 524290, 65537, 0, 524291, 65537, 0, 524292, 65537, 0, 524293, 65537, 0, 524294, 65537, 0, 524295, 65537, 0, 524296, 65537, 0, 524297, 65537, 0, 524298, 65537, 0, 524299, 65537, 0, 524300, 65537, 0, 524301, 65537, 0, 524302, 65537, 0, 524303, 65537, 0, 458767, 65537, 0, 393231, 65537, 0, 327695, 65537, 0, 262159, 65537, 0, 196623, 65537, 0, 131087, 65537, 0, 65551, 65537, 0, 15, 65537, 0, -65521, 65537, 0, -131057, 65537, 0, -196593, 65537, 0, -262129, 65537, 0, -327665, 65537, 0, -393201, 65537, 0, -458737, 65537, 0, -524273, 65537, 0, -589809, 65537, 0, -589810, 65537, 0, -589811, 65537, 0, -589812, 65537, 0, -589813, 65537, 0, -589814, 65537, 0, -589815, 65537, 0, -589816, 65537, 0, -589817, 65537, 0, -589818, 65537, 0, -589819, 65537, 0, -589820, 65537, 0, -589821, 65537, 0, -589822, 65537, 0, -589823, 65537, 0, -589824, 65537, 0, -524289, 65537, 0, -524290, 65537, 0, -524291, 65537, 0, -524292, 65537, 0, -524293, 65537, 0, -524294, 65537, 0, -524295, 65537, 0, -524296, 65537, 0, -524297, 65537, 0, -524298, 65537, 0, -524299, 65537, 0, -524300, 65537, 0, -524301, 65537, 0, -524302, 65537, 0, -524303, 65537, 0, -524304, 65537, 0, -458768, 65537, 0, -393232, 65537, 0, -327696, 65537, 0, -262160, 65537, 0, -196624, 65537, 0, -131088, 65537, 0, -65552, 65537, 0, -16, 65537, 0, 65520, 65537, 0, 131056, 65537, 0, 196592, 65537, 0, 262128, 65537, 0, 327664, 65537, 0, 393200, 65537, 0, 458736, 65537, 0, 524272, 65537, 0, 524273, 65537, 0, 524274, 65537, 0, 524275, 65537, 0, 524276, 65537, 0, 524277, 65537, 0, 524278, 65537, 0, 524279, 65537, 0, 458756, 65537, 0, 458757, 65537, 0, 458758, 65537, 0, 458759, 65537, 0, 458760, 65537, 0, 458761, 65537, 0, 458762, 65537, 0, 458763, 65537, 0, 458764, 65537, 0, 458765, 65537, 0, 458766, 65537, 0, 458755, 65537, 0, 458754, 65537, 0, 458753, 65537, 0, 458752, 65537, 0, 524287, 65537, 0, 524286, 65537, 0, 524285, 65537, 0, 524284, 65537, 0, 524283, 65537, 0, 524282, 65537, 0, 524281, 65537, 0, 524280, 65537, 0, -393231, 65537, 0, -327695, 65537, 0, -262159, 65537, 0, -196623, 65537, 0, -131087, 65537, 0, -65551, 65537, 0, -15, 65537, 0, 65521, 65537, 0, 131057, 65537, 0, 196593, 65537, 0, 262129, 65537, 0, 327665, 65537, 0, 393201, 65537, 0, 458737, 65537, 0, -458767, 65537, 0, -524274, 65537, 0, -458738, 65537, 0, -393202, 65537, 0, -327666, 65537, 0, -262130, 65537, 0, -196594, 65537, 0, -131058, 65537, 0, -65522, 65537, 0, 14, 65537, 0, 65550, 65537, 0, 131086, 65537, 0, 196622, 65537, 0, 262158, 65537, 0, 327694, 65537, 0, 393230, 65537, 0, -524275, 65537, 0, -524276, 65537, 0, -524277, 65537, 0, -524278, 65537, 0, -524279, 65537, 0, -524280, 65537, 0, -524281, 65537, 0, -524282, 65537, 0, -524283, 65537, 0, -524284, 65537, 0, -524285, 65537, 0, -524286, 65537, 0, -524287, 65537, 0, -524288, 65537, 0, -458753, 65537, 0, -458754, 65537, 0, -458755, 65537, 0, -458756, 65537, 0, -458757, 65537, 0, -458758, 65537, 0, -458759, 65537, 0, -458760, 65537, 0, -458761, 65537, 0, -458762, 65537, 0, -458763, 65537, 0, -458764, 65537, 0, -458765, 65537, 0, -458766, 65537, 0, 393204, 131073, 0, 458740, 131073, 0, 327667, 131073, 0, 327666, 131073, 0, 393203, 131073, 0, 393202, 131073, 0, 458739, 131073, 0, 458738, 131073, 0, 458741, 131073, 0, 393205, 131073, 0, 393206, 131073, 0, 327670, 131073, 0, 327669, 131073, 0, 327668, 131073, 0, 458742, 131073, 0, 327671, 131073, 0, 393207, 131073, 0, 458743, 131073, 0, 393208, 131073, 0, 393209, 131073, 0, 393210, 131073, 0, 327675, 131073, 0, 327676, 131073, 0, 327677, 131073, 0, 327678, 131073, 0, 327679, 131073, 0, 393214, 131073, 0, 393213, 131073, 0, 393212, 131073, 0, 393211, 131073, 0, 458744, 131073, 0, 458745, 131073, 0, 458746, 131073, 0, 458747, 131073, 0, 458748, 131073, 0, 458749, 131073, 0, 458750, 131073, 0, 458751, 131073, 0, 393216, 131073, 0, 393217, 131073, 0, 393218, 131073, 0, 393219, 131073, 0, 327683, 131073, 0, 327684, 131073, 0, 327682, 131073, 0, 327681, 131073, 0, 327680, 131073, 0, 393215, 131073, 0, 327672, 131073, 0, 327673, 131073, 0, 327674, 131073, 0, 262144, 131073, 0, 262145, 131073, 0, 262146, 131073, 0, 262147, 131073, 0, 262148, 131073, 0, 262149, 131073, 0, 327685, 131073, 0, 393220, 131073, 0, 393221, 131073, 0, 393222, 131073, 0, 393223, 131073, 0, 327686, 131073, 0, 327687, 131073, 0, 327688, 131073, 0, 327689, 131073, 0, 327690, 131073, 0, 262150, 131073, 0, 262151, 131073, 0, 262152, 131073, 0, 262153, 131073, 0, 393224, 131073, 0, 393225, 131073, 0, 393226, 131073, 0, 393227, 131073, 0, 327691, 131073, 0, 327692, 131073, 0, 262156, 131073, 0, 327693, 131073, 0, 393228, 131073, 0, 393229, 131073, 0, 262157, 131073, 0, 262155, 131073, 0, 262154, 131073, 0, 196597, 131073, 0, 262133, 131073, 0, 262134, 131073, 0, 196598, 131073, 0, 262132, 131073, 0, 196596, 131073, 0, 262131, 131073, 0, 196595, 131073, 0, 196594, 131073, 0, 262130, 131073, 0)

[node name="Objects" type="Node" parent="."]

[node name="MultiplayerSpawner" type="MultiplayerSpawner" parent="."]
_spawnable_scenes = PackedStringArray("res://scenes/player.tscn")
spawn_path = NodePath("../Objects")

[node name="Camera" type="Camera2D" parent="."]

[node name="UI" type="CanvasLayer" parent="."]

[node name="Lobby" type="PanelContainer" parent="UI" node_paths=PackedStringArray("main", "server_listener", "server_advertiser", "connect_address", "connect_port", "connect_list", "host_address", "host_port", "host_name", "host_broadcast")]
process_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("Theme_7qrt7")
theme_override_styles/panel = SubResource("StyleBoxFlat_rr5dk")
script = ExtResource("4_yvhqy")
main = NodePath("../..")
server_listener = NodePath("ServerListener")
server_advertiser = NodePath("ServerAdvertiser")
connect_address = NodePath("TabContainer/Connect/VBox/HBoxContainer/ConnectAddress")
connect_port = NodePath("TabContainer/Connect/VBox/HBoxContainer/ConnectPort")
connect_list = NodePath("TabContainer/Connect/VBox/ConnectList")
host_address = NodePath("TabContainer/Host/VBox/HBoxContainer3/HostAddress")
host_port = NodePath("TabContainer/Host/VBox/HBoxContainer/HostPort")
host_name = NodePath("TabContainer/Host/VBox/HBoxContainer2/HostName")
host_broadcast = NodePath("TabContainer/Host/VBox/HostBroadcast")

[node name="TabContainer" type="TabContainer" parent="UI/Lobby"]
layout_mode = 2
tab_alignment = 1

[node name="Connect" type="MarginContainer" parent="UI/Lobby/TabContainer"]
layout_mode = 2
theme_override_constants/margin_left = 4
theme_override_constants/margin_top = 4
theme_override_constants/margin_right = 4
theme_override_constants/margin_bottom = 4

[node name="VBox" type="VBoxContainer" parent="UI/Lobby/TabContainer/Connect"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="ConnectList" type="ItemList" parent="UI/Lobby/TabContainer/Connect/VBox"]
unique_name_in_owner = true
custom_minimum_size = Vector2(0, 50)
layout_mode = 2
size_flags_vertical = 3
item_count = 1
item_0/text = "Looking for games on your local network..."
item_0/selectable = false
item_0/disabled = true

[node name="HBoxContainer" type="HBoxContainer" parent="UI/Lobby/TabContainer/Connect/VBox"]
layout_mode = 2

[node name="ConnectAddress" type="LineEdit" parent="UI/Lobby/TabContainer/Connect/VBox/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "address"
caret_blink = true
caret_blink_interval = 0.5

[node name="Label" type="Label" parent="UI/Lobby/TabContainer/Connect/VBox/HBoxContainer"]
layout_mode = 2
text = ":"
vertical_alignment = 1

[node name="ConnectPort" type="LineEdit" parent="UI/Lobby/TabContainer/Connect/VBox/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "1234"
placeholder_text = "port"
caret_blink = true
caret_blink_interval = 0.5

[node name="ConnectButton" type="Button" parent="UI/Lobby/TabContainer/Connect/VBox/HBoxContainer"]
layout_mode = 2
text = "Connect"

[node name="Host" type="MarginContainer" parent="UI/Lobby/TabContainer"]
visible = false
layout_mode = 2
theme_override_constants/margin_left = 4
theme_override_constants/margin_top = 4
theme_override_constants/margin_right = 4
theme_override_constants/margin_bottom = 4

[node name="VBox" type="VBoxContainer" parent="UI/Lobby/TabContainer/Host"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3

[node name="HBoxContainer3" type="HBoxContainer" parent="UI/Lobby/TabContainer/Host/VBox"]
layout_mode = 2

[node name="Label" type="Label" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer3"]
layout_mode = 2
text = "Your ip address:"
vertical_alignment = 1

[node name="HostAddress" type="LineEdit" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer3"]
unique_name_in_owner = true
layout_mode = 2
size_flags_horizontal = 3
editable = false
caret_blink = true
caret_blink_interval = 0.5

[node name="HostBroadcast" type="CheckButton" parent="UI/Lobby/TabContainer/Host/VBox"]
unique_name_in_owner = true
layout_mode = 2
button_pressed = true
text = "Broadcast on network"

[node name="TextEdit" type="TextEdit" parent="UI/Lobby/TabContainer/Host/VBox"]
visible = false
custom_minimum_size = Vector2(0, 24)
layout_mode = 2
size_flags_vertical = 3
placeholder_text = "Server description... (optional)"

[node name="HBoxContainer" type="HBoxContainer" parent="UI/Lobby/TabContainer/Host/VBox"]
layout_mode = 2

[node name="PortLabel" type="Label" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer"]
layout_mode = 2
text = "Port #:"
vertical_alignment = 1

[node name="HostPort" type="LineEdit" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer"]
unique_name_in_owner = true
layout_mode = 2
text = "1234"
placeholder_text = "port"
caret_blink = true
caret_blink_interval = 0.5

[node name="HBoxContainer2" type="HBoxContainer" parent="UI/Lobby/TabContainer/Host/VBox"]
layout_mode = 2
size_flags_vertical = 8

[node name="HostName" type="LineEdit" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer2"]
layout_mode = 2
size_flags_horizontal = 3
placeholder_text = "server name (optional)"

[node name="HostButton" type="Button" parent="UI/Lobby/TabContainer/Host/VBox/HBoxContainer2"]
layout_mode = 2
text = "Host & Play"

[node name="ServerListener" type="Node" parent="UI/Lobby"]
script = ExtResource("5_db7qn")

[node name="ServerAdvertiser" type="Node" parent="UI/Lobby"]
script = ExtResource("6_8yafm")

[connection signal="item_clicked" from="UI/Lobby/TabContainer/Connect/VBox/ConnectList" to="UI/Lobby" method="_on_connect_list_item_clicked"]
[connection signal="pressed" from="UI/Lobby/TabContainer/Connect/VBox/HBoxContainer/ConnectButton" to="UI/Lobby" method="_btn_connect"]
[connection signal="pressed" from="UI/Lobby/TabContainer/Host/VBox/HBoxContainer2/HostButton" to="UI/Lobby" method="_btn_host"]
[connection signal="new_server" from="UI/Lobby/ServerListener" to="UI/Lobby" method="_on_server_listener_new_server"]
